
kprobes
- 插桩时不允许抢占或中断，不允许插桩自己的函数。
- 对所有进程生效？

uprobes
- 基于文件插桩，对所有进程生效

插桩类似gdb断点原理

## tracepoints

在内核编译阶段会在跟踪点位置插入一条不做具体工作的指令(如`nop`，长度5字节，方便替换为一个5字节长的`jmp`指令)

当某个跟踪器启用跟踪点时，会在跟踪点回调函数数组中插入一条新的跟踪器回调函数，以RCU方式同步更新。如果跟踪点之前处于禁用状态，则替换nop指令为跳转至蹦床函数

当禁用某个跟踪点时，以RCU方式同步删除该回调函数记录。如果数组为空，则将jmp指令重新写为nop指令


# 2.4.1 基于帧指针的调用栈回溯
- EBP寄存器 (基本不可用)
- 调试信息 (DWARF.eh_frame .debug_frame)
- LBR (Last Branch Record)
- ORC (Oops Rewind Capability)